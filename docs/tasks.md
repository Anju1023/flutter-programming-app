# 🗓️ moku / 開発タスク一覧

## 開発フェーズ概要

| フェーズ | 名前              | 期間   | 目標                                   |
| :------- | :---------------- | :----- | :------------------------------------- |
| Phase 1  | Quiet Start       | 3 ヶ月 | 1 言語(Python)で心地よくコードが書ける |
| Phase 2  | Interior Update   | 2 ヶ月 | アトリエを育てたくなる                 |
| Phase 3  | AI & Monetization | 2 ヶ月 | 困ったときに頼れる                     |

---

## Phase 1: Quiet Start (3 ヶ月)

### 1.1 プロジェクトセットアップ (Week 1)

- [x] Flutter プロジェクト初期化
- [x] ディレクトリ構造の設計
- [x] 依存パッケージのセットアップ
  - [x] Riverpod (flutter_riverpod)
  - [x] Hive (isar から変更)
  - [x] go_router
  - [x] google_fonts
  - [x] flutter_animate
- [x] コード規約・リンターの設定
- [x] Git リポジトリ初期化

### 1.2 デザインシステム実装 (Week 1-2)

- [x] カラーパレット定義 (`app_colors.dart`)
- [x] タイポグラフィ定義 (`app_typography.dart`)
- [x] テーマ設定 (`app_theme.dart`)
- [x] 共通コンポーネント作成
  - [x] ボタン (`moku_button.dart`)
  - [x] カード (`moku_card.dart`)
  - [x] 入力フィールド (`moku_text_field.dart`)
- [x] アニメーションユーティリティ (`moku_animations.dart`)

### 1.3 コアナビゲーション (Week 2)

- [x] 画面構成の実装
  - [x] ホーム画面
  - [x] レッスン画面
  - [x] アトリエ画面
  - [x] マイページ画面
- [x] ボトムナビゲーション
- [ ] 画面遷移アニメーション

### 1.4 キャラクター「Rumi」実装 (Week 2-3)

- [x] Rumi ウィジェット作成 (`rumi.dart`)
  - [x] メインボディ（雲フォルム）
  - [x] ミニマルな点目
- [x] アイドル時のアニメーション（浮遊）
- [x] 状態による表情変化（7 種類のムード）
- [x] RumiMini / RumiMessage コンポーネント

### 1.5 認証・ユーザー管理 (Week 3-4)

- [x] Supabase プロジェクト接続
- [x] 認証サービス実装 (`auth_service.dart`)
  - [x] メール/パスワード認証
  - [x] マジックリンク
  - [x] OAuth (Google, Apple) 準備
- [x] Riverpod プロバイダー (`auth_provider.dart`)
- [x] ログイン UI (`login_screen.dart`)

- [ ] Supabase プロジェクト作成
- [ ] 認証フローの実装
  - [ ] メールアドレス認証
  - [ ] ソーシャルログイン (Google, Apple)
  - [ ] マジックリンク
- [ ] ユーザープロファイル管理
- [ ] ローカルセッション管理 (Isar)

### 1.6 学習コンテンツ基盤 (Week 4-6)

- [x] データモデル設計 (`content_models.dart`)
  - [x] Course / Unit / Lesson / LessonStep
  - [x] StoryContent / GuideContent / QuizContent / WorkContent
- [x] Freezed によるイミュータブルモデル
- [x] サンプルコンテンツ (`sample_content.dart`)
  - [x] Python 基礎コース（4 レッスン）
- [x] ContentRepository 実装
- [x] Riverpod プロバイダー

### 1.7 学習フロー画面実装 (Week 6-8)

- [x] ストーリー画面 (`story_screen.dart`)
- [x] ガイド画面 (`guide_screen.dart`)
- [x] クイズ画面 (`quiz_screen.dart`)
- [x] ワーク画面 (`work_screen.dart`)
  - [x] 簡易 Python シミュレーター
- [x] `AppTypography.code` 追加
- [x] `AppColors.warmBeige` 追加

### 1.8 コードエディタ「Canvas」(Week 8-10)

- [ ] 基本エディタ UI
- [ ] シンタックスハイライト (低コントラスト)
- [ ] Python コード実行環境
- [ ] エラー表示 (やさしいトーン)
- [ ] Rumi によるヒント表示

### 1.9 ゲーミフィケーション基礎 (Week 10-12)

- [ ] ドロップ (経験値) システム
  - [ ] ビーカーに溜まるアニメーション
- [ ] デイズ (連続学習) カウンター
  - [ ] カレンダー UI
- [ ] 進捗データの永続化

### 1.10 BGM 機能 (Week 11-12)

- [ ] オーディオプレイヤー実装
- [ ] Lo-Fi BGM の組み込み
- [ ] 再生/停止/音量コントロール

---

## Phase 2: Interior Update (2 ヶ月)

### 2.1 タネ (Seeds) システム (Week 1-2)

- [ ] タネの獲得ロジック
- [ ] タネ所持数の UI 表示
- [ ] タネ獲得時のアニメーション

### 2.2 アトリエ画面拡張 (Week 2-4)

- [ ] インテリアアイテムのデータモデル
- [ ] アイテム一覧画面
- [ ] 植物を植えるインタラクション
- [ ] 成長アニメーション

### 2.3 環境変化システム (Week 4-6)

- [ ] 学習継続による空の色変化
  - [ ] 朝焼け → 青空 → 夕焼け
- [ ] 季節・天気バリエーション
- [ ] アトリエの模様替えプリセット

### 2.4 アンロック・報酬システム (Week 6-8)

- [ ] アチーブメント定義
- [ ] アンロック条件の実装
- [ ] 報酬獲得 UI / アニメーション

---

## Phase 3: AI & Monetization (2 ヶ月)

### 3.1 AI チャット機能 (Week 1-4)

- [ ] AI API 統合 (Claude / Gemini)
- [ ] チャット UI
- [ ] Rumi のトーン設定
  - [ ] 丁寧なフラット語
  - [ ] NG/OK ワードリスト
- [ ] コードレビュー・ヒント機能

### 3.2 プレミアムプラン (Week 4-6)

- [ ] 課金システム設計
- [ ] App Store / Google Play 連携
- [ ] プレミアム機能の実装
  - [ ] 無制限レッスン
  - [ ] 限定インテリア
  - [ ] AI 使い放題
- [ ] Free プランの制限実装

### 3.3 タネ購入 (Week 6-8)

- [ ] In-App Purchase 実装
- [ ] タネパックの設計
- [ ] 購入フロー UI

---

## 継続タスク (全フェーズ共通)

### テスト

- [ ] ユニットテスト
- [ ] ウィジェットテスト
- [ ] 統合テスト
- [ ] E2E テスト

### パフォーマンス

- [ ] 画像最適化
- [ ] アニメーション最適化
- [ ] メモリ使用量監視

### アクセシビリティ

- [ ] VoiceOver / TalkBack 対応
- [ ] 動的フォントサイズ対応
- [ ] カラーコントラスト確認

### ローカライゼーション

- [ ] 日本語 (プライマリ)
- [ ] 英語 (セカンダリ)

---

## マイルストーン

| 日付   | マイルストーン | 成果物                       |
| :----- | :------------- | :--------------------------- |
| +4 週  | Alpha 1        | 基本 UI・ナビゲーション完成  |
| +8 週  | Alpha 2        | 学習フロー・エディタ完成     |
| +12 週 | Beta 1         | Phase 1 完了・内部テスト開始 |
| +20 週 | Beta 2         | Phase 2 完了・限定公開       |
| +28 週 | RC             | Phase 3 完了・最終テスト     |
| +30 週 | Release        | 正式リリース 🎉              |

---

> 💭 **Note**
>
> 各タスクの詳細な仕様は、実装時に別途ドキュメントを作成する。
> 優先順位は開発状況に応じて柔軟に調整する。
